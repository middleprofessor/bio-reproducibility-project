value.name="count")
dim(rotifers)
sheet_i <- "Rotifers"
range_i <- "A5:X36" # skip double header and read only to week 20
rotifers <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i))
col_labels <- c("native", "id", "week_0", "week_0.5", paste("week", 1:20, sep="_"))
setnames(rotifers, old=colnames(rotifers), new=col_labels)
# add Nitrogen column by guessing
rotifers[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
dim(rotifers)
?read_excel
# phage
sheet_i <- "Phage"
range_i <- "A2:X34" # ignores labels as the first two columns have none
phage <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
col_labels <- c("native", "id", "week_0", "week_0.5", paste("week", 1:20, sep="_"))
setnames(phage, old=colnames(phage), new=col_labels)
# add Nitrogen column by guessing
phage[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
# cull 99.5% rows
phage <- phage[native!=99.5]
# make column of 1 - native for frequency of phage-resistant Nodularia
phage[, resistant:=1-native]
# make resistant and Nitrogen factors
phage[, resistant:=factor(resistant)]
phage[, N:=factor(N)]
# limit to weeks 2,4 6, 8, 12, 20
ycols <- paste("week", c(2, 4, 6, 8, 12, 20), sep="_")
phage_long <- melt(phage,
id.vars=c("resistant", "id", "N"),
measure.vars=ycols,
variable.name="week",
value.name="count")
dim(phage)
head(phage)
sheet_i <- "Rotifers"
range_i <- "A5:X36" # skip double header and read only to week 20
rotifers <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
col_labels <- c("native", "id", "week_0", "week_0.5", paste("week", 1:20, sep="_"))
setnames(rotifers, old=colnames(rotifers), new=col_labels)
# add Nitrogen column by guessing
rotifers[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
# cull 99.5% rows
rotifers <- rotifers[native!=99.5]
# make column of 1 - native for frequency of phage-resistant Nodularia
rotifers[, resistant:=1-native]
# make resistant and Nitrogen factors
rotifers[, resistant:=factor(resistant)]
rotifers[, N:=factor(N)]
# limit to weeks 2,4 6, 8, 12, 20
ycols <- paste("week", c(2, 4, 6, 8, 12, 20), sep="_")
rotifers_long <- melt(rotifers,
id.vars=c("resistant", "id", "N"),
measure.vars=ycols,
variable.name="week",
value.name="count")
dim(rotifers)
summary(aov(count ~ N + Error(id), phage_long))$"Error: id"
summary(aov(count ~ N + Error(id), rotifers_long))$"Error: id"
pre_process_data <- function(dt){
# takes the raw imported sheet and process it for analysis
# output is long format
# add Nitrogen column by guessing
dt[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
# cull 99.5% rows
dt <- dt[native!=99.5]
# make column of 1 - native for frequency of phage-resistant Nodularia
dt[, resistant:=1-native]
# make resistant and Nitrogen factors
dt[, resistant:=factor(resistant)]
dt[, N:=factor(N)]
# limit to weeks 2,4 6, 8, 12, 20
ycols <- paste("week", c(2, 4, 6, 8, 12, 20), sep="_")
dt_long <- melt(dt,
id.vars=c("resistant", "id", "N"),
measure.vars=ycols,
variable.name="week",
value.name="count")
}
return(dt_long)
pre_process_data <- function(dt){
# takes the raw imported sheet and process it for analysis
# output is long format
# add Nitrogen column by guessing
dt[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
# cull 99.5% rows
dt <- dt[native!=99.5]
# make column of 1 - native for frequency of phage-resistant Nodularia
dt[, resistant:=1-native]
# make resistant and Nitrogen factors
dt[, resistant:=factor(resistant)]
dt[, N:=factor(N)]
# limit to weeks 2,4 6, 8, 12, 20
ycols <- paste("week", c(2, 4, 6, 8, 12, 20), sep="_")
dt_long <- melt(dt,
id.vars=c("resistant", "id", "N"),
measure.vars=ycols,
variable.name="week",
value.name="count")
return(dt_long)
}
pre_process_data <- function(dt){
# takes the raw imported sheet and process it for analysis
# output is long format
# set column names
col_labels <- c("native", "id", "week_0", "week_0.5", paste("week", 1:20, sep="_"))
setnames(dt, old=colnames(dt), new=col_labels)
# add Nitrogen column by guessing
dt[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
# cull 99.5% rows
dt <- dt[native!=99.5]
# make column of 1 - native for frequency of phage-resistant Nodularia
dt[, resistant:=1-native]
# make resistant and Nitrogen factors
dt[, resistant:=factor(resistant)]
dt[, N:=factor(N)]
# limit to weeks 2,4 6, 8, 12, 20
ycols <- paste("week", c(2, 4, 6, 8, 12, 20), sep="_")
dt_long <- melt(dt,
id.vars=c("resistant", "id", "N"),
measure.vars=ycols,
variable.name="week",
value.name="count")
return(dt_long)
}
# phage
sheet_i <- "Phage"
range_i <- "A2:X34" # ignores labels as the first two columns have none
phage <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
phage_long <- pre_process_data(phage)
# phage
sheet_i <- "Phage"
range_i <- "A3:X34" # ignores labels as the first two columns have none
phage <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
phage_long <- pre_process_data(phage)
summary(aov(count ~ N + Error(id), phage_long))$"Error: id"
summary(aov(count ~ N + Error(id), rotifers_long))$"Error: id"
sheet_i <- "Rotifers"
range_i <- "A5:X36" # skip double header and read only to week 20
rotifers <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
rotifers_long <- pre_process_data(rotifers)
sheet_i <- "Chlorella"
range_i <- "A4:X35" # skip double header and read only to week 20
chlorella <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
chlorella_long <- pre_process_data(chlorella)
summary(aov(count ~ N + Error(id), phage_long))$"Error: id"
summary(aov(count ~ N + Error(id), chlorella_long))$"Error: id"
summary(aov(count ~ N + Error(id), rotifers_long))$"Error: id"
head(phage)
# phage
sheet_i <- "Phage"
range_i <- "A3:X34" # ignores labels as the first two columns have none
phage <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
phage_long <- pre_process_data(phage)
head(phage)
pre_process_data <- function(dt_in){
# takes the raw imported sheet and process it for analysis
# output is long format
dt <- copy(dt_in)
# set column names
col_labels <- c("native", "id", "week_0", "week_0.5", paste("week", 1:20, sep="_"))
setnames(dt, old=colnames(dt), new=col_labels)
# add Nitrogen column by guessing
dt[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
# cull 99.5% rows
dt <- dt[native!=99.5]
# make column of 1 - native for frequency of phage-resistant Nodularia
dt[, resistant:=1-native]
# make resistant and Nitrogen factors
dt[, resistant:=factor(resistant)]
dt[, N:=factor(N)]
# limit to weeks 2,4 6, 8, 12, 20
ycols <- paste("week", c(2, 4, 6, 8, 12, 20), sep="_")
dt_long <- melt(dt,
id.vars=c("resistant", "id", "N"),
measure.vars=ycols,
variable.name="week",
value.name="count")
return(dt_long)
}
# phage
sheet_i <- "Phage"
range_i <- "A3:X34" # ignores labels as the first two columns have none
phage <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
phage_long <- pre_process_data(phage)
head(phage)
pre_process_data <- function(dt_in){
# takes the raw imported sheet and process it for analysis
# output is long format
# set column names
col_labels <- c("native", "id", "week_0", "week_0.5", paste("week", 1:20, sep="_"))
setnames(dt, old=colnames(dt), new=col_labels)
# add Nitrogen column by guessing
dt[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
# cull 99.5% rows
dt <- dt[native!=99.5]
# make column of 1 - native for frequency of phage-resistant Nodularia
dt[, resistant:=1-native]
# make resistant and Nitrogen factors
dt[, resistant:=factor(resistant)]
dt[, N:=factor(N)]
# limit to weeks 2,4 6, 8, 12, 20
ycols <- paste("week", c(2, 4, 6, 8, 12, 20), sep="_")
dt_long <- melt(dt,
id.vars=c("resistant", "id", "N"),
measure.vars=ycols,
variable.name="week",
value.name="count")
return(dt_long)
}
# phage
sheet_i <- "Phage"
range_i <- "A3:X34" # ignores labels as the first two columns have none
phage <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
phage_long <- pre_process_data(phage)
pre_process_data <- function(dt){
# takes the raw imported sheet and process it for analysis
# output is long format
# set column names
col_labels <- c("native", "id", "week_0", "week_0.5", paste("week", 1:20, sep="_"))
setnames(dt, old=colnames(dt), new=col_labels)
# add Nitrogen column by guessing
dt[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
# cull 99.5% rows
dt <- dt[native!=99.5]
# make column of 1 - native for frequency of phage-resistant Nodularia
dt[, resistant:=1-native]
# make resistant and Nitrogen factors
dt[, resistant:=factor(resistant)]
dt[, N:=factor(N)]
# limit to weeks 2,4 6, 8, 12, 20
ycols <- paste("week", c(2, 4, 6, 8, 12, 20), sep="_")
dt_long <- melt(dt,
id.vars=c("resistant", "id", "N"),
measure.vars=ycols,
variable.name="week",
value.name="count")
return(dt_long)
}
# phage
sheet_i <- "Phage"
range_i <- "A3:X34" # ignores labels as the first two columns have none
phage <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
phage_long <- pre_process_data(phage)
pre_process_data <- function(dt_in){
# takes the raw imported sheet and process it for analysis
# output is long format
dt <- copy(dt_in)
# set column names
col_labels <- c("native", "id", "week_0", "week_0.5", paste("week", 1:20, sep="_"))
setnames(dt, old=colnames(dt), new=col_labels)
# add Nitrogen column by guessing
dt[, N:=rep(rep(c("N_lim", "N_rich"), each=4), 2)]
# cull 99.5% rows
dt <- dt[native!=99.5]
# make column of 1 - native for frequency of phage-resistant Nodularia
dt[, resistant:=1-native]
# make resistant and Nitrogen factors
dt[, resistant:=factor(resistant)]
dt[, N:=factor(N)]
# limit to weeks 2,4 6, 8, 12, 20
ycols <- paste("week", c(2, 4, 6, 8, 12, 20), sep="_")
dt_long <- melt(dt,
id.vars=c("resistant", "id", "N"),
measure.vars=ycols,
variable.name="week",
value.name="count")
return(dt_long)
}
# phage
sheet_i <- "Phage"
range_i <- "A3:X34" # ignores labels as the first two columns have none
phage <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
phage_long <- pre_process_data(phage)
phage[, 1:2]
sheet_i <- "Nodularia"
range_i <- "A4:X35" # skip double header and read only to week 20
nodularia_part <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
nodularia <- cbind(phage[, 1:2], nodularia_part)
nodularia_long <- pre_process_data(chlorella)
View(chlorella)
# phage
sheet_i <- "Phage"
range_i <- "A3:X34" # ignores labels as the first two columns have none
phage <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
phage_long <- pre_process_data(phage)
sheet_i <- "Rotifers"
range_i <- "A5:X36" # skip double header and read only to week 20
rotifers <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
rotifers_long <- pre_process_data(rotifers)
sheet_i <- "Chlorella"
range_i <- "A5:V36" # skip double header and read only to week 20
# add first two columns as in other three
chlorella <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
chlorella_long <- pre_process_data(chlorella)
sheet_i <- "Nodularia"
range_i <- "A4:X35" # skip double header and read only to week 20
nodularia_part <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
nodularia <- cbind(phage[, 1:2], nodularia_part)
nodularia_long <- pre_process_data(nodularia)
head(phage)
head(chlorella)
dt_in <- chlorella
dt <- copy(dt_in)
# set column names
col_labels <- c("native", "id", "week_0", "week_0.5", paste("week", 1:20, sep="_"))
setnames(dt, old=colnames(dt), new=col_labels)
colnames(chlorella)
colnames(phage)
sheet_i <- "Chlorella"
range_i <- "A4:X36" # skip double header and read only to week 20
# add first two columns as in other three
chlorella <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
chlorella_long <- pre_process_data(chlorella)
sheet_i <- "Chlorella"
range_i <- "A4:X35" # skip double header and read only to week 20
# add first two columns as in other three
chlorella <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
chlorella_long <- pre_process_data(chlorella)
sheet_i <- "Nodularia"
range_i <- "A5:V36" # skip double header and read only to week 20
nodularia_part <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
nodularia <- cbind(phage[, 1:2], nodularia_part)
nodularia_long <- pre_process_data(nodularia)
names(nodularia)
sheet_i <- "Nodularia"
range_i <- "A5:V36" # skip double header and read only to week 20
nodularia_part <- data.table(read_excel(file_path, sheet=sheet_i, range=range_i, col_names=FALSE))
# change colnames so not duplicate
colnames(nodularia_part) <- paste("X",1:22,sep="")
nodularia <- cbind(phage[, 1:2], nodularia_part)
nodularia_long <- pre_process_data(nodularia)
summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id"
summary(aov(count ~ N + Error(id), phage_long))$"Error: id"
summary(aov(count ~ N + Error(id), chlorella_long))$"Error: id"
summary(aov(count ~ N + Error(id), rotifers_long))$"Error: id"
names(phage_long)
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long))$"Error: id"
summary(aov(count ~ resistant + Error(id), chlorella_long))$"Error: id"
summary(aov(count ~ resistant + Error(id), rotifers_long))$"Error: id"
summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id"
summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id"[, c("F value", "Pr(>F)")]
dim(summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id")
names(summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id")
names((aov(count ~ N + Error(id), nodularia_long))$"Error: id")
names(aov(count ~ N + Error(id), nodularia_long))
names(summary(aov(count ~ N + Error(id), nodularia_long)))
?aov
fit <- aov(count ~ N + Error(id), nodularia_long)
print(fit)
summary(fit)
summary.aov
?summary.aov
model.tables(aov)
model.tables(fit)
unlist(summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id")
unlist(summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id")[c("Df2", "F value1", "Pr(>F)1")]
cols
stats <- c("Df2", "F value1", "Pr(>F)1")
aov1 <- unlist(summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id")[stats]
aov1
aov1 <- unlist(summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id")[stats]
aov2 <- unlist(summary(aov(count ~ N + Error(id), phage_long))$"Error: id")[stats]
aov3 <- unlist(summary(aov(count ~ N + Error(id), chlorella_long))$"Error: id")[stats]
aov4 <- unlist(summary(aov(count ~ N + Error(id), rotifers_long))$"Error: id")[stats]
table_1 <- data.table(component=c("Nodularia", "Phage", "Chlorella", "Rotifer"),
rbind(aov1, aov2, aov3, aov4))
table_1
show_full_table <- FALSE
if(show_full_table==TRUE){
summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id"
summary(aov(count ~ N + Error(id), phage_long))$"Error: id"
summary(aov(count ~ N + Error(id), chlorella_long))$"Error: id"
summary(aov(count ~ N + Error(id), rotifers_long))$"Error: id"
}
stats <- c("Df2", "F value1", "Pr(>F)1")
aov1 <- unlist(summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id")[stats]
aov2 <- unlist(summary(aov(count ~ N + Error(id), phage_long))$"Error: id")[stats]
aov3 <- unlist(summary(aov(count ~ N + Error(id), chlorella_long))$"Error: id")[stats]
aov4 <- unlist(summary(aov(count ~ N + Error(id), rotifers_long))$"Error: id")[stats]
table_1 <- data.table(component=c("Nodularia", "Phage", "Chlorella", "Rotifer"),
rbind(aov1, aov2, aov3, aov4))
knitr::kable(table_1, digits=c(NA, 0, 3, 3))
show_full_table <- FALSE
if(show_full_table==TRUE){
summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id"
summary(aov(count ~ N + Error(id), phage_long))$"Error: id"
summary(aov(count ~ N + Error(id), chlorella_long))$"Error: id"
summary(aov(count ~ N + Error(id), rotifers_long))$"Error: id"
}
stats <- c("Df2", "F value1", "Pr(>F)1")
aov1 <- unlist(summary(aov(count ~ N + Error(id), nodularia_long))$"Error: id")[stats]
aov2 <- unlist(summary(aov(count ~ N + Error(id), phage_long))$"Error: id")[stats]
aov3 <- unlist(summary(aov(count ~ N + Error(id), chlorella_long))$"Error: id")[stats]
aov4 <- unlist(summary(aov(count ~ N + Error(id), rotifers_long))$"Error: id")[stats]
table_1 <- data.table(component=c("Nodularia", "Phage", "Chlorella", "Rotifer"),
rbind(aov1, aov2, aov3, aov4))
setnames(table_1, old=colnames(table_1), new=c("component", "DDF", "F", "p"))
knitr::kable(table_1, digits=c(NA, 0, 3, 3))
stats <- c("Df2", "F value1", "Pr(>F)1")
aov1a <- unlist(summary(aov(count ~ N + Error(id), nodularia_long[N=="N_lim"]))$"Error: id")[stats]
aov2a <- unlist(summary(aov(count ~ N + Error(id), phage_long[N=="N_lim"]))$"Error: id")[stats]
aov3a <- unlist(summary(aov(count ~ N + Error(id), chlorella_long[N=="N_lim"]))$"Error: id")[stats]
aov4a <- unlist(summary(aov(count ~ N + Error(id), rotifers_long[N=="N_lim"]))$"Error: id")[stats]
aov1b <- unlist(summary(aov(count ~ N + Error(id), nodularia_long[N=="N_rich"]))$"Error: id")[stats]
aov2b <- unlist(summary(aov(count ~ N + Error(id), phage_long[N=="N_rich"]))$"Error: id")[stats]
aov3b <- unlist(summary(aov(count ~ N + Error(id), chlorella_long[N=="N_rich"]))$"Error: id")[stats]
aov4b <- unlist(summary(aov(count ~ N + Error(id), rotifers_long[N=="N_rich"]))$"Error: id")[stats]
show_full_table <- FALSE
if(show_full_table==TRUE){
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_rich"]))$"Error: id"
}
stats <- c("Df2", "F value1", "Pr(>F)1")
aov1a <- unlist(summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_lim"]))$"Error: id")[stats]
aov2a <- unlist(summary(aov(count ~ resistant + Error(id), phage_long[N=="N_lim"]))$"Error: id")[stats]
aov3a <- unlist(summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_lim"]))$"Error: id")[stats]
aov4a <- unlist(summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_lim"]))$"Error: id")[stats]
aov1b <- unlist(summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_rich"]))$"Error: id")[stats]
aov2b <- unlist(summary(aov(count ~ resistant + Error(id), phage_long[N=="N_rich"]))$"Error: id")[stats]
aov3b <- unlist(summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_rich"]))$"Error: id")[stats]
aov4b <- unlist(summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_rich"]))$"Error: id")[stats]
table_1 <- data.table(component=rep(c("Nodularia", "Phage", "Chlorella", "Rotifer"), each=2),
treatment=rep(c("N_lim", "N_rich"), 2),
rbind(aov1a, aov1b, aov2a, aov2b, aov3a, aov3b, aov4a, aov4b))
setnames(table_1, old=colnames(table_1), new=c("component", "treatment", "DDF", "F", "p"))
knitr::kable(table_1, digits=c(NA, NA, 0, 3, 3))
show_full_table <- FALSE
if(show_full_table==TRUE){
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_rich"]))$"Error: id"
}
stats <- c("Df2", "F value1", "Pr(>F)1")
aov1a <- unlist(summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_lim"]))$"Error: id")[stats]
aov2a <- unlist(summary(aov(count ~ resistant + Error(id), phage_long[N=="N_lim"]))$"Error: id")[stats]
aov3a <- unlist(summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_lim"]))$"Error: id")[stats]
aov4a <- unlist(summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_lim"]))$"Error: id")[stats]
aov1b <- unlist(summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_rich"]))$"Error: id")[stats]
aov2b <- unlist(summary(aov(count ~ resistant + Error(id), phage_long[N=="N_rich"]))$"Error: id")[stats]
aov3b <- unlist(summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_rich"]))$"Error: id")[stats]
aov4b <- unlist(summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_rich"]))$"Error: id")[stats]
table_1 <- data.table(component=rep(c("Nodularia", "Phage", "Chlorella", "Rotifer"), each=2),
treatment=rep(c("N_lim", "N_rich"), 2),
rbind(aov1a, aov1b, aov2a, aov2b, aov3a, aov3b, aov4a, aov4b))
setnames(table_1, old=colnames(table_1), new=c("component", "treatment", "DDF", "F", "p"))
knitr::kable(table_1, digits=c(NA, NA, 0, 3, 4))
show_full_table <- FALSE
if(show_full_table==TRUE){
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_rich"]))$"Error: id"
}
stats <- c("Df2", "F value1", "Pr(>F)1")
aov1a <- unlist(summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_lim"]))$"Error: id")[stats]
aov2a <- unlist(summary(aov(count ~ resistant + Error(id), phage_long[N=="N_lim"]))$"Error: id")[stats]
aov3a <- unlist(summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_lim"]))$"Error: id")[stats]
aov4a <- unlist(summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_lim"]))$"Error: id")[stats]
aov1b <- unlist(summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_rich"]))$"Error: id")[stats]
aov2b <- unlist(summary(aov(count ~ resistant + Error(id), phage_long[N=="N_rich"]))$"Error: id")[stats]
aov3b <- unlist(summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_rich"]))$"Error: id")[stats]
aov4b <- unlist(summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_rich"]))$"Error: id")[stats]
table_2 <- data.table(component=rep(c("Nodularia", "Phage", "Chlorella", "Rotifer"), each=2),
treatment=rep(c("N_lim", "N_rich"), 2),
rbind(aov1a, aov1b, aov2a, aov2b, aov3a, aov3b, aov4a, aov4b))
setnames(table_2, old=colnames(table_1), new=c("component", "treatment", "DDF", "F", "p"))
show_full_table <- FALSE
if(show_full_table==TRUE){
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), phage_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_rich"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_lim"]))$"Error: id"
summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_rich"]))$"Error: id"
}
stats <- c("Df2", "F value1", "Pr(>F)1")
aov1a <- unlist(summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_lim"]))$"Error: id")[stats]
aov2a <- unlist(summary(aov(count ~ resistant + Error(id), phage_long[N=="N_lim"]))$"Error: id")[stats]
aov3a <- unlist(summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_lim"]))$"Error: id")[stats]
aov4a <- unlist(summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_lim"]))$"Error: id")[stats]
aov1b <- unlist(summary(aov(count ~ resistant + Error(id), nodularia_long[N=="N_rich"]))$"Error: id")[stats]
aov2b <- unlist(summary(aov(count ~ resistant + Error(id), phage_long[N=="N_rich"]))$"Error: id")[stats]
aov3b <- unlist(summary(aov(count ~ resistant + Error(id), chlorella_long[N=="N_rich"]))$"Error: id")[stats]
aov4b <- unlist(summary(aov(count ~ resistant + Error(id), rotifers_long[N=="N_rich"]))$"Error: id")[stats]
table_2 <- data.table(component=rep(c("Nodularia", "Phage", "Chlorella", "Rotifer"), each=2),
treatment=rep(c("N_lim", "N_rich"), 2),
rbind(aov1a, aov1b, aov2a, aov2b, aov3a, aov3b, aov4a, aov4b))
setnames(table_2, old=colnames(table_2), new=c("component", "treatment", "DDF", "F", "p"))
knitr::kable(table_2, digits=c(NA, NA, 0, 2, 5))
blogdown:::serve_site()
blogdown:::serve_site()
